import React from 'react';
import { useForm, Controller } from 'react-hook-form';
import { yupResolver } from '@hookform/resolvers/yup';
import * as yup from 'yup';
import {
    Box,
    Typography,
    Button,
    Grid,
    Paper,
    Divider,
    TextField,
    MenuItem,
    Autocomplete
} from '@mui/material';

// Your provided components
const AutocompleteFieldComponent = ({
    label,
    options = [],
    value,
    onChange,
    fullWidth = true,
    size = "small",
    className = "",
    isMulti = false,
    placeholder = "",
    getOptionLabel = (option) => option?.label || '',
    error = false,
    helperText = '',
}) => {
    return (
        <Autocomplete
            multiple={isMulti}
            options={options}
            value={value || (isMulti ? [] : null)}
            onChange={(_, newValue) => onChange(newValue)}
            getOptionLabel={getOptionLabel}
            isOptionEqualToValue={(option, value) => option.id === value.id}
            fullWidth={fullWidth}
            size={size}
            className={className}
            renderInput={(params) => (
                <TextField
                    {...params}
                    label={label}
                    placeholder={placeholder}
                    error={error}
                    helperText={helperText}
                />
            )}
            sx={{
                '& .MuiOutlinedInput-root': {
                    '&.Mui-focused fieldset': {
                        borderColor: '#0000FF',
                    },
                    '& .MuiOutlinedInput-notchedOutline': {
                        borderRadius: '10px',
                    },
                },
                '& .MuiInputLabel-root.Mui-focused': {
                    color: '#0000FF',
                },
            }}
        />
    );
};

const TextFieldComponent = ({
    label,
    name,
    value,
    onChange,
    select = false,
    options = [],
    type = 'text',
    fullWidth = true,
    error = false,
    helperText = '',
    ...rest
}) => (
    <TextField
        size="small"
        select={select}
        label={label}
        name={name}
        value={value}
        onChange={onChange}
        fullWidth={fullWidth}
        type={type}
        variant="outlined"
        error={error}
        helperText={helperText}
        sx={{
            '& .MuiOutlinedInput-root': {
                borderRadius: '10px',
                '&.Mui-focused fieldset': {
                    borderColor: '#0000FF',
                },
            },
            '& .MuiOutlinedInput-notchedOutline': {
                borderRadius: '10px',
            },
            '& .MuiInputLabel-root.Mui-focused': {
                color: '#0000FF',
            },
        }}
        {...rest}
    >
        {select &&
            options.map(({ id, name }) => (
                <MenuItem key={id} value={id}>
                    {name}
                </MenuItem>
            ))}
    </TextField>
);

// Validation schema
const validationSchema = yup.object({
    productCategory: yup.string().required('Product Category is required'),
    productPurpose: yup.string().required('Product Purpose is required'),
    productType: yup.string().required('Product Type is required'),
    commonUseCase: yup.string().required('Common Use Case is required'),
    targetCustomerType: yup.string().required('Target Customer Type is required'),
    versionId: yup.string().required('Version Id is required'),
    productName: yup.string().required('Product Name is required'),
    productCode: yup.string().required('Product Code is required'),
    productFor: yup.string().required('Product For is required'),
    productDescription: yup.string().required('Product Description is required'),
    minimumLoanAmount: yup.number().required('Minimum Loan Amount is required').positive(),
    maximumLoanAmount: yup.number().required('Maximum Loan Amount is required').positive(),
    tenureTypeSelection: yup.string().required('Tenure Type Selection is required'),
    tenureUnit: yup.string().required('Tenure Unit is required'),
    minTenure: yup.number().required('Min Tenure is required').positive(),
    maxTenure: yup.number().required('Max Tenure is required').positive(),
    allowedTenureValues: yup.string().required('Allowed Tenure Values is required'),
    defaultTenureValue: yup.number().required('Default Tenure Value is required').positive(),
    isTenureBasedOnPayoutCycle: yup.string().required('Is Tenure Based on Payout Cycle is required'),
    payoutCycleType: yup.string().required('Payout Cycle Type is required'),
    tenureCalculationLogic: yup.string().required('Tenure Calculation Logic is required'),
    maxTenureHardCap: yup.number().required('Max Tenure (Hard Cap) is required').positive(),
    repaymentDateOverrideAllowed: yup.string().required('Repayment Date Override Allowed is required'),
    interestType: yup.string().required('Interest Type is required'),
    interestRate: yup.number().required('Interest Rate is required').positive(),
    gracePeriod: yup.number().required('Grace Period is required').min(0),
    penalInterestRate: yup.number().required('Penal Interest Rate is required').positive(),
    moratoriumPeriod: yup.number().required('Moratorium Period is required').min(0),
    repaymentMethod: yup.string().required('Repayment Method is required'),
    latePaymentFees: yup.number().required('Late Payment Fees is required').min(0),
    prepaymentAllowed: yup.string().required('Prepayment Allowed is required'),
    prepaymentCharges: yup.number().required('Prepayment Charges is required').min(0),
    lockInPeriod: yup.number().required('Lock-In Period is required').min(0),
    processingFee: yup.number().required('Processing Fee is required').min(0),
    gstOnProcessingFee: yup.number().required('GST on Processing Fee is required').min(0),
    setupFee: yup.number().required('Setup Fee is required').min(0),
    gstOnSetupFee: yup.number().required('GST on Setup Fee is required').min(0),
    subscriptionOption: yup.string().required('Subscription Option is required'),
    subscriptionPeriods: yup.number().required('Subscription Periods & Fee is required').min(0),
    perTransactionFee: yup.number().required('Per Transaction Fee is required').min(0),
    gstOnTransactionFee: yup.number().required('GST on Transaction Fee is required').min(0),
    insuranceCharge: yup.number().required('Insurance Charge is required').min(0),
    gstOnInsuranceCharge: yup.number().required('GST on Insurance Charge is required').min(0),
    otherCharges: yup.number().required('Other Charges is required').min(0),
    gstOnOtherCharge: yup.number().required('GST on Other Charge is required').min(0),
    collateralRequired: yup.string().required('Collateral Required is required'),
    collateralType: yup.string().required('Collateral Type is required'),
    kycTypeRequired: yup.string().required('KYC Type Required is required'),
    coBorrowerRequired: yup.string().required('Co-borrower Required is required'),
    insuranceBundled: yup.string().required('Insurance Bundled is required'),
    creditBureauCheckMandatory: yup.string().required('Credit Bureau Check Mandatory is required'),
    minimumCIBILScore: yup.number().required('Minimum CIBIL / Score is required').min(0),
    consentCaptureFormat: yup.string().required('Consent Capture Format is required'),
    defaultReporting: yup.string().required('Default Reporting is required'),
    riskCategory: yup.string().required('Risk Category is required'),
    disbursementMode: yup.string().required('Disbursement Mode is required'),
    variantAllowed: yup.string().required('Variant Allowed is required'),
    productEnabledForAPI: yup.string().required('Product Enabled for API is required'),
    legalDocumentTemplate: yup.string().required('Legal Document Template is required'),
    applicableSystems: yup.string().required('Applicable Systems is required'),
    employerLinked: yup.string().required('Employer Linked is required'),
    employerLoanCap: yup.number().required('Employer Loan Cap is required').min(0),
    repaymentSource: yup.string().required('Repayment Source is required'),
    lienStructure: yup.string().required('Lien Structure is required'),
    productMonitoringType: yup.string().required('Product Monitoring Type is required'),
    delinquencyTriggerThreshold: yup.number().required('Delinquency Trigger Threshold is required').min(0),
    riskScoringModelUsed: yup.string().required('Risk Scoring Model Used is required'),
    portfolioCap: yup.number().required('Portfolio Cap is required').min(0),
    reviewCycle: yup.string().required('Review Cycle is required'),
});

// Mock data for dropdowns
const mockOptions = {
    productCategory: [
        { id: 'Product-1001', label: 'Product-1001' },
        { id: 'Product-1002', label: 'Product-1002' },
    ],
    productPurpose: [
        { id: 'Multipurpose', label: 'Multipurpose' },
        { id: 'Business', label: 'Business' },
    ],
    productType: [
        { id: 'Product-1001', label: 'Product-1001' },
        { id: 'Product-1002', label: 'Product-1002' },
    ],
    commonUseCase: [
        { id: 'Business', label: 'Business' },
        { id: 'Personal', label: 'Personal' },
    ],
    targetCustomerType: [
        { id: 'Individual', label: 'Individual' },
        { id: 'Business', label: 'Business' },
    ],
    versionId: [
        { id: 'Auto Generate', label: 'Auto Generate' },
        { id: 'Manual', label: 'Manual' },
    ],
    productFor: [
        { id: 'Employer Specific', label: 'Employer Specific' },
        { id: 'General', label: 'General' },
    ],
    tenureTypeSelection: [
        { id: 'Months', label: 'Months' },
        { id: 'Years', label: 'Years' },
    ],
    tenureUnit: [
        { id: 'Months', label: 'Months' },
        { id: 'Years', label: 'Years' },
    ],
    allowedTenureValues: [
        { id: 'Multiples', label: 'Multiples' },
        { id: 'Fixed', label: 'Fixed' },
    ],
    isTenureBasedOnPayoutCycle: [
        { id: 'Yes / No', label: 'Yes / No' },
    ],
    payoutCycleType: [
        { id: 'Monthly', label: 'Monthly' },
        { id: 'Quarterly', label: 'Quarterly' },
    ],
    tenureCalculationLogic: [
        { id: 'Standard', label: 'Standard' },
        { id: 'Custom', label: 'Custom' },
    ],
    repaymentDateOverrideAllowed: [
        { id: 'Yes / No', label: 'Yes / No' },
    ],
    interestType: [
        { id: 'Fixed', label: 'Fixed' },
        { id: 'Floating', label: 'Floating' },
    ],
    repaymentMethod: [
        { id: 'Multiples', label: 'Multiples' },
        { id: 'Fixed', label: 'Fixed' },
    ],
    prepaymentAllowed: [
        { id: 'Yes', label: 'Yes' },
        { id: 'No', label: 'No' },
    ],
    subscriptionOption: [
        { id: 'First Time Only', label: 'First Time Only' },
        { id: 'Recurring', label: 'Recurring' },
    ],
    collateralRequired: [
        { id: 'Yes', label: 'Yes' },
        { id: 'No', label: 'No' },
    ],
    collateralType: [
        { id: 'Property', label: 'Property' },
        { id: 'Asset', label: 'Asset' },
    ],
    kycTypeRequired: [
        { id: 'Basic', label: 'Basic' },
        { id: 'Full', label: 'Full' },
    ],
    coBorrowerRequired: [
        { id: 'Yes', label: 'Yes' },
        { id: 'No', label: 'No' },
    ],
    insuranceBundled: [
        { id: 'Yes', label: 'Yes' },
        { id: 'No', label: 'No' },
    ],
    creditBureauCheckMandatory: [
        { id: 'Yes', label: 'Yes' },
        { id: 'No', label: 'No' },
    ],
    consentCaptureFormat: [
        { id: 'Multiples', label: 'Multiples' },
        { id: 'Single', label: 'Single' },
    ],
    defaultReporting: [
        { id: 'Yes', label: 'Yes' },
        { id: 'No', label: 'No' },
    ],
    riskCategory: [
        { id: 'Low', label: 'Low' },
        { id: 'Medium', label: 'Medium' },
        { id: 'High', label: 'High' },
    ],
    disbursementMode: [
        { id: 'Multiples', label: 'Multiples' },
        { id: 'Single', label: 'Single' },
    ],
    variantAllowed: [
        { id: 'Multiples', label: 'Multiples' },
        { id: 'Single', label: 'Single' },
    ],
    productEnabledForAPI: [
        { id: 'Multiples', label: 'Multiples' },
        { id: 'Single', label: 'Single' },
    ],
    legalDocumentTemplate: [
        { id: 'Template1', label: 'Template1' },
        { id: 'Template2', label: 'Template2' },
    ],
    applicableSystems: [
        { id: 'Multiples', label: 'Multiples' },
        { id: 'Single', label: 'Single' },
    ],
    employerLinked: [
        { id: 'Multiples', label: 'Multiples' },
        { id: 'Single', label: 'Single' },
    ],
    repaymentSource: [
        { id: 'Multiples', label: 'Multiples' },
        { id: 'Single', label: 'Single' },
    ],
    lienStructure: [
        { id: 'Multiples', label: 'Multiples' },
        { id: 'Single', label: 'Single' },
    ],
    productMonitoringType: [
        { id: 'Auto', label: 'Auto' },
        { id: 'Manual', label: 'Manual' },
    ],
    riskScoringModelUsed: [
        { id: 'Model1', label: 'Model1' },
        { id: 'Model2', label: 'Model2' },
    ],
    reviewCycle: [
        { id: 'Monthly', label: 'Monthly' },
        { id: 'Quarterly', label: 'Quarterly' },
    ],
};


   
    const CreateProduct = () => {

         const {
        control,
        handleSubmit,
        formState: { errors },
        reset,
    } = useForm({
        resolver: yupResolver(validationSchema),
        mode: 'onChange',
    });

    const onSubmit = (data) => {
        console.log('Form Data:', data);
        alert('Form submitted successfully! Check console for data.');
    };

    const onSaveDraft = () => {
        console.log('Saving as draft...');
        alert('Draft saved successfully!');
    };
        return (
            <>
                <Box sx={{ maxWidth: 1200, mx: 'auto', p: 3 }}>
                    <Paper elevation={0} sx={{ p: 3, border: '1px solid #e0e0e0', borderRadius: 2 }}>
                        {/* Header */}
                        <Box sx={{ display: 'flex', alignItems: 'center', mb: 3 }}>
                            <Box
                                sx={{
                                    width: 24,
                                    height: 24,
                                    borderRadius: '50%',
                                    bgcolor: '#4285f4',
                                    display: 'flex',
                                    alignItems: 'center',
                                    justifyContent: 'center',
                                    mr: 2,
                                }}
                            >
                                <Typography sx={{ color: 'white', fontSize: 12, fontWeight: 'bold' }}>
                                    âœ“
                                </Typography>
                            </Box>
                            <Typography variant="h6" sx={{ color: '#4285f4', fontWeight: 600 }}>
                                Create Product
                            </Typography>
                        </Box>

                        <form onSubmit={handleSubmit(onSubmit)}>
                            {/* Basic Details */}
                            <Typography variant="h6" sx={{ color: '#4285f4', mb: 2, fontWeight: 600 }}>
                                Basic Details
                            </Typography>

                            <Grid container spacing={2} sx={{ mb: 3 }}>
                                <Grid item xs={12} md={4}>
                                    <Controller
                                        name="gracePeriod"
                                        control={control}
                                        render={({ field }) => (
                                            <TextFieldComponent
                                                label="Grace Period"
                                                type="number"
                                                {...field}
                                                error={!!errors.gracePeriod}
                                                helperText={errors.gracePeriod?.message}
                                            />
                                        )}
                                    />
                                </Grid>
                                <Grid item xs={12} md={4}>
                                    <Controller
                                        name="penalInterestRate"
                                        control={control}
                                        render={({ field }) => (
                                            <TextFieldComponent
                                                label="Penal Interest Rate"
                                                type="number"
                                                {...field}
                                                error={!!errors.penalInterestRate}
                                                helperText={errors.penalInterestRate?.message}
                                            />
                                        )}
                                    />
                                </Grid>
                                <Grid item xs={12} md={4}>
                                    <Controller
                                        name="moratoriumPeriod"
                                        control={control}
                                        render={({ field }) => (
                                            <TextFieldComponent
                                                label="Moratorium Period"
                                                type="number"
                                                {...field}
                                                error={!!errors.moratoriumPeriod}
                                                helperText={errors.moratoriumPeriod?.message}
                                            />
                                        )}
                                    />
                                </Grid>
                                <Grid item xs={12} md={4}>
                                    <Controller
                                        name="repaymentMethod"
                                        control={control}
                                        render={({ field }) => (
                                            <AutocompleteFieldComponent
                                                label="Repayment Method"
                                                options={mockOptions.repaymentMethod}
                                                value={field.value}
                                                onChange={field.onChange}
                                                error={!!errors.repaymentMethod}
                                                helperText={errors.repaymentMethod?.message}
                                            />
                                        )}
                                    />
                                </Grid>
                                <Grid item xs={12} md={4}>
                                    <Controller
                                        name="latePaymentFees"
                                        control={control}
                                        render={({ field }) => (
                                            <TextFieldComponent
                                                label="Late Payment Fees"
                                                type="number"
                                                {...field}
                                                error={!!errors.latePaymentFees}
                                                helperText={errors.latePaymentFees?.message}
                                            />
                                        )}
                                    />
                                </Grid>
                                <Grid item xs={12} md={4}>
                                    <Controller
                                        name="prepaymentAllowed"
                                        control={control}
                                        render={({ field }) => (
                                            <AutocompleteFieldComponent
                                                label="Prepayment Allowed?"
                                                options={mockOptions.prepaymentAllowed}
                                                value={field.value}
                                                onChange={field.onChange}
                                                error={!!errors.prepaymentAllowed}
                                                helperText={errors.prepaymentAllowed?.message}
                                            />
                                        )}
                                    />
                                </Grid>
                                <Grid item xs={12} md={4}>
                                    <Controller
                                        name="prepaymentCharges"
                                        control={control}
                                        render={({ field }) => (
                                            <TextFieldComponent
                                                label="Prepayment Charges"
                                                type="number"
                                                {...field}
                                                error={!!errors.prepaymentCharges}
                                                helperText={errors.prepaymentCharges?.message}
                                            />
                                        )}
                                    />
                                </Grid>
                                <Grid item xs={12} md={4}>
                                    <Controller
                                        name="lockInPeriod"
                                        control={control}
                                        render={({ field }) => (
                                            <TextFieldComponent
                                                label="Lock-In Period"
                                                type="number"
                                                {...field}
                                                error={!!errors.lockInPeriod}
                                                helperText={errors.lockInPeriod?.message}
                                            />
                                        )}
                                    />
                                </Grid>
                            </Grid>

                            {/* Fee & Charges Structure */}
                            <Typography variant="h6" sx={{ color: '#4285f4', mb: 2, fontWeight: 600 }}>
                                Fee & Charges Structure
                            </Typography>

                            <Grid container spacing={2} sx={{ mb: 3 }}>
                                <Grid item xs={12} md={4}>
                                    <Controller
                                        name="processingFee"
                                        control={control}
                                        render={({ field }) => (
                                            <TextFieldComponent
                                                label="Processing Fee"
                                                type="number"
                                                {...field}
                                                error={!!errors.processingFee}
                                                helperText={errors.processingFee?.message}
                                            />
                                        )}
                                    />
                                </Grid>
                                <Grid item xs={12} md={4}>
                                    <Controller
                                        name="gstOnProcessingFee"
                                        control={control}
                                        render={({ field }) => (
                                            <TextFieldComponent
                                                label="GST on Processing Fee"
                                                type="number"
                                                {...field}
                                                error={!!errors.gstOnProcessingFee}
                                                helperText={errors.gstOnProcessingFee?.message}
                                            />
                                        )}
                                    />
                                </Grid>
                                <Grid item xs={12} md={4}>
                                    <Controller
                                        name="setupFee"
                                        control={control}
                                        render={({ field }) => (
                                            <TextFieldComponent
                                                label="Setup Fee"
                                                type="number"
                                                {...field}
                                                error={!!errors.setupFee}
                                                helperText={errors.setupFee?.message}
                                            />
                                        )}
                                    />
                                </Grid>
                                <Grid item xs={12} md={4}>
                                    <Controller
                                        name="gstOnSetupFee"
                                        control={control}
                                        render={({ field }) => (
                                            <TextFieldComponent
                                                label="GST on Setup Fee"
                                                type="number"
                                                {...field}
                                                error={!!errors.gstOnSetupFee}
                                                helperText={errors.gstOnSetupFee?.message}
                                            />
                                        )}
                                    />
                                </Grid>
                                <Grid item xs={12} md={4}>
                                    <Controller
                                        name="subscriptionOption"
                                        control={control}
                                        render={({ field }) => (
                                            <AutocompleteFieldComponent
                                                label="Subscription Option"
                                                options={mockOptions.subscriptionOption}
                                                value={field.value}
                                                onChange={field.onChange}
                                                error={!!errors.subscriptionOption}
                                                helperText={errors.subscriptionOption?.message}
                                            />
                                        )}
                                    />
                                </Grid>
                                <Grid item xs={12} md={4}>
                                    <Controller
                                        name="subscriptionPeriods"
                                        control={control}
                                        render={({ field }) => (
                                            <TextFieldComponent
                                                label="Subscription Periods & Fee"
                                                type="number"
                                                {...field}
                                                error={!!errors.subscriptionPeriods}
                                                helperText={errors.subscriptionPeriods?.message}
                                            />
                                        )}
                                    />
                                </Grid>
                                <Grid item xs={12} md={4}>
                                    <Controller
                                        name="perTransactionFee"
                                        control={control}
                                        render={({ field }) => (
                                            <TextFieldComponent
                                                label="Per Transaction Fee"
                                                type="number"
                                                {...field}
                                                error={!!errors.perTransactionFee}
                                                helperText={errors.perTransactionFee?.message}
                                            />
                                        )}
                                    />
                                </Grid>
                                <Grid item xs={12} md={4}>
                                    <Controller
                                        name="gstOnTransactionFee"
                                        control={control}
                                        render={({ field }) => (
                                            <TextFieldComponent
                                                label="GST on Transaction Fee"
                                                type="number"
                                                {...field}
                                                error={!!errors.gstOnTransactionFee}
                                                helperText={errors.gstOnTransactionFee?.message}
                                            />
                                        )}
                                    />
                                </Grid>
                                <Grid item xs={12} md={4}>
                                    <Controller
                                        name="insuranceCharge"
                                        control={control}
                                        render={({ field }) => (
                                            <TextFieldComponent
                                                label="Insurance Charge"
                                                type="number"
                                                {...field}
                                                error={!!errors.insuranceCharge}
                                                helperText={errors.insuranceCharge?.message}
                                            />
                                        )}
                                    />
                                </Grid>
                                <Grid item xs={12} md={4}>
                                    <Controller
                                        name="gstOnInsuranceCharge"
                                        control={control}
                                        render={({ field }) => (
                                            <TextFieldComponent
                                                label="GST on Insurance Charge"
                                                type="number"
                                                {...field}
                                                error={!!errors.gstOnInsuranceCharge}
                                                helperText={errors.gstOnInsuranceCharge?.message}
                                            />
                                        )}
                                    />
                                </Grid>
                                <Grid item xs={12} md={4}>
                                    <Controller
                                        name="otherCharges"
                                        control={control}
                                        render={({ field }) => (
                                            <TextFieldComponent
                                                label="Other Charges"
                                                type="number"
                                                {...field}
                                                error={!!errors.otherCharges}
                                                helperText={errors.otherCharges?.message}
                                            />
                                        )}
                                    />
                                </Grid>
                                <Grid item xs={12} md={4}>
                                    <Controller
                                        name="gstOnOtherCharge"
                                        control={control}
                                        render={({ field }) => (
                                            <TextFieldComponent
                                                label="GST on Other Charge"
                                                type="number"
                                                {...field}
                                                error={!!errors.gstOnOtherCharge}
                                                helperText={errors.gstOnOtherCharge?.message}
                                            />
                                        )}
                                    />
                                </Grid>
                            </Grid>

                            {/* Security & Compliance */}
                            <Typography variant="h6" sx={{ color: '#4285f4', mb: 2, fontWeight: 600 }}>
                                Security & Compliance
                            </Typography>

                            <Grid container spacing={2} sx={{ mb: 3 }}>
                                <Grid item xs={12} md={4}>
                                    <Controller
                                        name="collateralRequired"
                                        control={control}
                                        render={({ field }) => (
                                            <AutocompleteFieldComponent
                                                label="Collateral Required"
                                                options={mockOptions.collateralRequired}
                                                value={field.value}
                                                onChange={field.onChange}
                                                error={!!errors.collateralRequired}
                                                helperText={errors.collateralRequired?.message}
                                            />
                                        )}
                                    />
                                </Grid>
                                <Grid item xs={12} md={4}>
                                    <Controller
                                        name="collateralType"
                                        control={control}
                                        render={({ field }) => (
                                            <AutocompleteFieldComponent
                                                label="Collateral Type"
                                                options={mockOptions.collateralType}
                                                value={field.value}
                                                onChange={field.onChange}
                                                error={!!errors.collateralType}
                                                helperText={errors.collateralType?.message}
                                            />
                                        )}
                                    />
                                </Grid>
                                <Grid item xs={12} md={4}>
                                    <Controller
                                        name="kycTypeRequired"
                                        control={control}
                                        render={({ field }) => (
                                            <AutocompleteFieldComponent
                                                label="KYC Type Required"
                                                options={mockOptions.kycTypeRequired}
                                                value={field.value}
                                                onChange={field.onChange}
                                                error={!!errors.kycTypeRequired}
                                                helperText={errors.kycTypeRequired?.message}
                                            />
                                        )}
                                    />
                                </Grid>
                                <Grid item xs={12} md={4}>
                                    <Controller
                                        name="coBorrowerRequired"
                                        control={control}
                                        render={({ field }) => (
                                            <AutocompleteFieldComponent
                                                label="Co-borrower Required"
                                                options={mockOptions.coBorrowerRequired}
                                                value={field.value}
                                                onChange={field.onChange}
                                                error={!!errors.coBorrowerRequired}
                                                helperText={errors.coBorrowerRequired?.message}
                                            />
                                        )}
                                    />
                                </Grid>
                                <Grid item xs={12} md={4}>
                                    <Controller
                                        name="insuranceBundled"
                                        control={control}
                                        render={({ field }) => (
                                            <AutocompleteFieldComponent
                                                label="Insurance Bundled"
                                                options={mockOptions.insuranceBundled}
                                                value={field.value}
                                                onChange={field.onChange}
                                                error={!!errors.insuranceBundled}
                                                helperText={errors.insuranceBundled?.message}
                                            />
                                        )}
                                    />
                                </Grid>
                                <Grid item xs={12} md={4}>
                                    <Controller
                                        name="creditBureauCheckMandatory"
                                        control={control}
                                        render={({ field }) => (
                                            <AutocompleteFieldComponent
                                                label="Credit Bureau Check Mandatory"
                                                options={mockOptions.creditBureauCheckMandatory}
                                                value={field.value}
                                                onChange={field.onChange}
                                                error={!!errors.creditBureauCheckMandatory}
                                                helperText={errors.creditBureauCheckMandatory?.message}
                                            />
                                        )}
                                    />
                                </Grid>
                                <Grid item xs={12} md={4}>
                                    <Controller
                                        name="minimumCIBILScore"
                                        control={control}
                                        render={({ field }) => (
                                            <TextFieldComponent
                                                label="Minimum CIBIL / Score"
                                                type="number"
                                                {...field}
                                                error={!!errors.minimumCIBILScore}
                                                helperText={errors.minimumCIBILScore?.message}
                                            />
                                        )}
                                    />
                                </Grid>
                                <Grid item xs={12} md={4}>
                                    <Controller
                                        name="consentCaptureFormat"
                                        control={control}
                                        render={({ field }) => (
                                            <AutocompleteFieldComponent
                                                label="Consent Capture Format"
                                                options={mockOptions.consentCaptureFormat}
                                                value={field.value}
                                                onChange={field.onChange}
                                                error={!!errors.consentCaptureFormat}
                                                helperText={errors.consentCaptureFormat?.message}
                                            />
                                        )}
                                    />
                                </Grid>
                                <Grid item xs={12} md={4}>
                                    <Controller
                                        name="defaultReporting"
                                        control={control}
                                        render={({ field }) => (
                                            <AutocompleteFieldComponent
                                                label="Default Reporting"
                                                options={mockOptions.defaultReporting}
                                                value={field.value}
                                                onChange={field.onChange}
                                                error={!!errors.defaultReporting}
                                                helperText={errors.defaultReporting?.message}
                                            />
                                        )}
                                    />
                                </Grid>
                                <Grid item xs={12} md={4}>
                                    <Controller
                                        name="riskCategory"
                                        control={control}
                                        render={({ field }) => (
                                            <AutocompleteFieldComponent
                                                label="Risk Category"
                                                options={mockOptions.riskCategory}
                                                value={field.value}
                                                onChange={field.onChange}
                                                error={!!errors.riskCategory}
                                                helperText={errors.riskCategory?.message}
                                            />
                                        )}
                                    />
                                </Grid>
                            </Grid>

                            {/* Disbursement Rules & Integration */}
                            <Typography variant="h6" sx={{ color: '#4285f4', mb: 2, fontWeight: 600 }}>
                                Disbursement Rules & Integration
                            </Typography>

                            <Grid container spacing={2} sx={{ mb: 3 }}>
                                <Grid item xs={12} md={4}>
                                    <Controller
                                        name="disbursementMode"
                                        control={control}
                                        render={({ field }) => (
                                            <AutocompleteFieldComponent
                                                label="Disbursement Mode"
                                                options={mockOptions.disbursementMode}
                                                value={field.value}
                                                onChange={field.onChange}
                                                error={!!errors.disbursementMode}
                                                helperText={errors.disbursementMode?.message}
                                            />
                                        )}
                                    />
                                </Grid>
                                <Grid item xs={12} md={4}>
                                    <Controller
                                        name="variantAllowed"
                                        control={control}
                                        render={({ field }) => (
                                            <AutocompleteFieldComponent
                                                label="Variant Allowed"
                                                options={mockOptions.variantAllowed}
                                                value={field.value}
                                                onChange={field.onChange}
                                                error={!!errors.variantAllowed}
                                                helperText={errors.variantAllowed?.message}
                                            />
                                        )}
                                    />
                                </Grid>
                                <Grid item xs={12} md={4}>
                                    <Controller
                                        name="productEnabledForAPI"
                                        control={control}
                                        render={({ field }) => (
                                            <AutocompleteFieldComponent
                                                label="Product Enabled for API"
                                                options={mockOptions.productEnabledForAPI}
                                                value={field.value}
                                                onChange={field.onChange}
                                                error={!!errors.productEnabledForAPI}
                                                helperText={errors.productEnabledForAPI?.message}
                                            />
                                        )}
                                    />
                                </Grid>
                                <Grid item xs={12} md={4}>
                                    <Controller
                                        name="legalDocumentTemplate"
                                        control={control}
                                        render={({ field }) => (
                                            <AutocompleteFieldComponent
                                                label="Legal Document Template"
                                                options={mockOptions.legalDocumentTemplate}
                                                value={field.value}
                                                onChange={field.onChange}
                                                error={!!errors.legalDocumentTemplate}
                                                helperText={errors.legalDocumentTemplate?.message}
                                            />
                                        )}
                                    />
                                </Grid>
                                <Grid item xs={12} md={4}>
                                    <Controller
                                        name="applicableSystems"
                                        control={control}
                                        render={({ field }) => (
                                            <AutocompleteFieldComponent
                                                label="Applicable Systems"
                                                options={mockOptions.applicableSystems}
                                                value={field.value}
                                                onChange={field.onChange}
                                                error={!!errors.applicableSystems}
                                                helperText={errors.applicableSystems?.message}
                                            />
                                        )}
                                    />
                                </Grid>
                            </Grid>

                            {/* Employer Tagging */}
                            <Typography variant="h6" sx={{ color: '#4285f4', mb: 2, fontWeight: 600 }}>
                                Employer Tagging (if applicable)
                            </Typography>

                            <Grid container spacing={2} sx={{ mb: 3 }}>
                                <Grid item xs={12} md={4}>
                                    <Controller
                                        name="employerLinked"
                                        control={control}
                                        render={({ field }) => (
                                            <AutocompleteFieldComponent
                                                label="Employer Linked"
                                                options={mockOptions.employerLinked}
                                                value={field.value}
                                                onChange={field.onChange}
                                                error={!!errors.employerLinked}
                                                helperText={errors.employerLinked?.message}
                                            />
                                        )}
                                    />
                                </Grid>
                                <Grid item xs={12} md={4}>
                                    <Controller
                                        name="employerLoanCap"
                                        control={control}
                                        render={({ field }) => (
                                            <TextFieldComponent
                                                label="Employer Loan Cap"
                                                type="number"
                                                {...field}
                                                error={!!errors.employerLoanCap}
                                                helperText={errors.employerLoanCap?.message}
                                            />
                                        )}
                                    />
                                </Grid>
                                <Grid item xs={12} md={4}>
                                    <Controller
                                        name="repaymentSource"
                                        control={control}
                                        render={({ field }) => (
                                            <AutocompleteFieldComponent
                                                label="Repayment Source"
                                                options={mockOptions.repaymentSource}
                                                value={field.value}
                                                onChange={field.onChange}
                                                error={!!errors.repaymentSource}
                                                helperText={errors.repaymentSource?.message}
                                            />
                                        )}
                                    />
                                </Grid>
                                <Grid item xs={12} md={4}>
                                    <Controller
                                        name="lienStructure"
                                        control={control}
                                        render={({ field }) => (
                                            <AutocompleteFieldComponent
                                                label="Lien Structure"
                                                options={mockOptions.lienStructure}
                                                value={field.value}
                                                onChange={field.onChange}
                                                error={!!errors.lienStructure}
                                                helperText={errors.lienStructure?.message}
                                            />
                                        )}
                                    />
                                </Grid>
                            </Grid>

                            {/* Performance & Monitoring */}
                            <Typography variant="h6" sx={{ color: '#4285f4', mb: 2, fontWeight: 600 }}>
                                Performance & Monitoring
                            </Typography>

                            <Grid container spacing={2} sx={{ mb: 4 }}>
                                <Grid item xs={12} md={4}>
                                    <Controller
                                        name="productMonitoringType"
                                        control={control}
                                        render={({ field }) => (
                                            <AutocompleteFieldComponent
                                                label="Product Monitoring Type"
                                                options={mockOptions.productMonitoringType}
                                                value={field.value}
                                                onChange={field.onChange}
                                                error={!!errors.productMonitoringType}
                                                helperText={errors.productMonitoringType?.message}
                                            />
                                        )}
                                    />
                                </Grid>
                                <Grid item xs={12} md={4}>
                                    <Controller
                                        name="delinquencyTriggerThreshold"
                                        control={control}
                                        render={({ field }) => (
                                            <TextFieldComponent
                                                label="Delinquency Trigger Threshold"
                                                type="number"
                                                {...field}
                                                error={!!errors.delinquencyTriggerThreshold}
                                                helperText={errors.delinquencyTriggerThreshold?.message}
                                            />
                                        )}
                                    />
                                </Grid>
                                <Grid item xs={12} md={4}>
                                    <Controller
                                        name="riskScoringModelUsed"
                                        control={control}
                                        render={({ field }) => (
                                            <AutocompleteFieldComponent
                                                label="Risk Scoring Model Used"
                                                options={mockOptions.riskScoringModelUsed}
                                                value={field.value}
                                                onChange={field.onChange}
                                                error={!!errors.riskScoringModelUsed}
                                                helperText={errors.riskScoringModelUsed?.message}
                                            />
                                        )}
                                    />
                                </Grid>
                                <Grid item xs={12} md={4}>
                                    <Controller
                                        name="portfolioCap"
                                        control={control}
                                        render={({ field }) => (
                                            <TextFieldComponent
                                                label="Portfolio Cap"
                                                type="number"
                                                {...field}
                                                error={!!errors.portfolioCap}
                                                helperText={errors.portfolioCap?.message}
                                            />
                                        )}
                                    />
                                </Grid>
                                <Grid item xs={12} md={4}>
                                    <Controller
                                        name="reviewCycle"
                                        control={control}
                                        render={({ field }) => (
                                            <AutocompleteFieldComponent
                                                label="Review Cycle"
                                                options={mockOptions.reviewCycle}
                                                value={field.value}
                                                onChange={field.onChange}
                                                error={!!errors.reviewCycle}
                                                helperText={errors.reviewCycle?.message}
                                            />
                                        )}
                                    />
                                </Grid>
                            </Grid>

                            {/* Action Buttons */}
                            <Box sx={{ display: 'flex', justifyContent: 'flex-end', gap: 2, mt: 4 }}>
                                <Button
                                    variant="outlined"
                                    onClick={onSaveDraft}
                                    sx={{
                                        borderColor: '#4285f4',
                                        color: '#4285f4',
                                        borderRadius: '8px',
                                        textTransform: 'none',
                                        px: 4,
                                        py: 1,
                                        '&:hover': {
                                            borderColor: '#3367d6',
                                            backgroundColor: 'rgba(66, 133, 244, 0.04)',
                                        },
                                    }}
                                >
                                    Save as Draft
                                </Button>
                                <Button
                                    type="submit"
                                    variant="contained"
                                    sx={{
                                        backgroundColor: '#4285f4',
                                        borderRadius: '8px',
                                        textTransform: 'none',
                                        px: 4,
                                        py: 1,
                                        '&:hover': {
                                            backgroundColor: '#3367d6',
                                        },
                                    }}
                                >
                                    Submit For Approval
                                </Button>
                            </Box>
                        </form>
                    </Paper>
                </Box>
            </>
        )
    }

    export default CreateProduct

